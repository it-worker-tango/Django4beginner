/*!
 * Theia Sticky Sidebar v1.4.0
 * https://github.com/WeCodePixels/theia-sticky-sidebar
 *
 * Glues your website's sidebars, making them permanently visible while scrolling.
 *
 * Copyright 2013-2016 WeCodePixels and other contributors
 * Released under the MIT license
 */
(function(a){a.fn.theiaStickySidebar=function(c){var e={containerSelector:"",additionalMarginTop:0,additionalMarginBottom:0,updateSidebarHeight:true,minWidth:0,disableOnResponsiveLayouts:true,sidebarBehavior:"modern"};c=a.extend(e,c);c.additionalMarginTop=parseInt(c.additionalMarginTop)||0;c.additionalMarginBottom=parseInt(c.additionalMarginBottom)||0;d(c,this);function d(h,g){var i=b(h,g);if(!i){console.log("TST: Body width smaller than options.minWidth. Init is delayed.");a(document).scroll(function(k,j){return function(l){var m=b(k,j);if(m){a(this).unbind(l)}}}(h,g));a(window).resize(function(k,j){return function(l){var m=b(k,j);if(m){a(this).unbind(l)}}}(h,g))}}function b(h,g){if(h.initialized===true){return true}if(a("body").width()<h.minWidth){return false}f(h,g);return true}function f(h,g){h.initialized=true;a("head").append(a('<style>.theiaStickySidebar:after {content: ""; display: table; clear: both;}</style>'));g.each(function(){var n={};n.sidebar=a(this);n.options=h||{};n.container=a(n.options.containerSelector);if(n.container.length==0){n.container=n.sidebar.parent()}n.sidebar.parents().css("-webkit-transform","none");n.sidebar.css({position:"relative",overflow:"visible","-webkit-box-sizing":"border-box","-moz-box-sizing":"border-box","box-sizing":"border-box"});n.stickySidebar=n.sidebar.find(".theiaStickySidebar");if(n.stickySidebar.length==0){var k=/(?:text|application)\/(?:x-)?(?:javascript|ecmascript)/i;n.sidebar.find("script").filter(function(p,o){return o.type.length===0||o.type.match(k)}).remove();n.stickySidebar=a("<div>").addClass("theiaStickySidebar").append(n.sidebar.children());n.sidebar.append(n.stickySidebar)}n.marginTop=parseInt(n.sidebar.css("margin-top"));n.marginBottom=parseInt(n.sidebar.css("margin-bottom"));n.paddingTop=parseInt(n.sidebar.css("padding-top"));n.paddingBottom=parseInt(n.sidebar.css("padding-bottom"));var j=n.stickySidebar.offset().top;var m=n.stickySidebar.outerHeight();n.stickySidebar.css("padding-top",1);n.stickySidebar.css("padding-bottom",1);j-=n.stickySidebar.offset().top;m=n.stickySidebar.outerHeight()-m-j;if(j==0){n.stickySidebar.css("padding-top",0);n.stickySidebarPaddingTop=0}else{n.stickySidebarPaddingTop=1}if(m==0){n.stickySidebar.css("padding-bottom",0);n.stickySidebarPaddingBottom=0}else{n.stickySidebarPaddingBottom=1}n.previousScrollTop=null;n.fixedScrollTop=0;i();n.onScroll=function(q){if(!q.stickySidebar.is(":visible")){return}if(a("body").width()<q.options.minWidth){i();return}if(q.options.disableOnResponsiveLayouts){var p=q.sidebar.outerWidth(q.sidebar.css("float")=="none");if(p+50>q.container.width()){i();return}}var r=a(document).scrollTop();var v="static";if(r>=q.container.offset().top+(q.paddingTop+q.marginTop-q.options.additionalMarginTop)){var s=q.paddingTop+q.marginTop+h.additionalMarginTop;var t=q.paddingBottom+q.marginBottom+h.additionalMarginBottom;var u=q.container.offset().top;var C=q.container.offset().top+l(q.container);var z=0+h.additionalMarginTop;var x;var y=(q.stickySidebar.outerHeight()+s+t)<a(window).height();if(y){x=z+q.stickySidebar.outerHeight()}else{x=a(window).height()-q.marginBottom-q.paddingBottom-h.additionalMarginBottom}var E=u-r+q.paddingTop+q.marginTop;var D=C-r-q.paddingBottom-q.marginBottom;var B=q.stickySidebar.offset().top-r;var A=q.previousScrollTop-r;if(q.stickySidebar.css("position")=="fixed"){if(q.options.sidebarBehavior=="modern"){B+=A}}if(q.options.sidebarBehavior=="stick-to-top"){B=h.additionalMarginTop}if(q.options.sidebarBehavior=="stick-to-bottom"){B=x-q.stickySidebar.outerHeight()}if(A>0){B=Math.min(B,z)}else{B=Math.max(B,x-q.stickySidebar.outerHeight())}B=Math.max(B,E);B=Math.min(B,D-q.stickySidebar.outerHeight());var F=q.container.height()==q.stickySidebar.outerHeight();if(!F&&B==z){v="fixed"}else{if(!F&&B==x-q.stickySidebar.outerHeight()){v="fixed"}else{if(r+B-q.sidebar.offset().top-q.paddingTop<=h.additionalMarginTop){v="static"}else{v="absolute"}}}}if(v=="fixed"){q.stickySidebar.css({position:"fixed",width:q.sidebar.width(),top:B,left:q.sidebar.offset().left+parseInt(q.sidebar.css("padding-left"))})}else{if(v=="absolute"){var w={};if(q.stickySidebar.css("position")!="absolute"){w.position="absolute";w.top=r+B-q.sidebar.offset().top-q.stickySidebarPaddingTop-q.stickySidebarPaddingBottom}w.width=q.sidebar.width();w.left="";q.stickySidebar.css(w)}else{if(v=="static"){i()}}}if(v!="static"){if(q.options.updateSidebarHeight==true){q.sidebar.css({"min-height":q.stickySidebar.outerHeight()+q.stickySidebar.offset().top-q.sidebar.offset().top+q.paddingBottom})}}q.previousScrollTop=r};n.onScroll(n);a(document).scroll(function(p){return function(){p.onScroll(p)}}(n));a(window).resize(function(p){return function(){p.stickySidebar.css({position:"static"});p.onScroll(p)}}(n));function i(){n.fixedScrollTop=0;n.sidebar.css({"min-height":"1px"});n.stickySidebar.css({position:"static",width:""})}function l(p){var o=p.height();p.children().each(function(){o=Math.max(o,a(this).height())});return o}})}}})(jQuery);